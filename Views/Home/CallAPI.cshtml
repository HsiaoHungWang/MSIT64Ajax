
@{
    ViewData["Title"] = "CallAPI";
}

<h1>CallAPI</h1>
<div class="row">
    <div class="col-4"></div>
    <div class="col-4">
        <table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>分類編號</th>
            <th>分類名稱</th>         
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>
    </div>
    <div class="col-4"></div>
</div>

@section Scripts{
    <script>
        //call Restful api => asp.net core web api
        //https://localhost:7201/api/Categories

        (async()=>{

            const response = await fetch('https://localhost:7201/api/Categories');
            const datas = await response.json();

            //顯示在網頁上
            const trDatas = datas.map(category=>{
                const {categoryId, categoryName} = category;
                return `
                    <tr>
                    <td>${categoryId}</td>
                    <td>${categoryName}</td>
                    </tr>
                `
            })

            document.querySelector('.table tbody').innerHTML = trDatas.join("");
        
        })();

    </script>
}